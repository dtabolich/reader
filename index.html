<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SemgReport Viewer</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div>
        <p class="eyebrow">SemgReport Viewer</p>
        <h1>Чтение отчётов Semgrep JSON и SARIF</h1>
        <p class="lede">
          Загрузите файл Semgrep (JSON) или любой SARIF отчёт, чтобы быстро
          увидеть сгруппированные результаты, детализацию по файлам и наглядное
          распределение по уровням риска.
        </p>
        <div class="header-actions">
        </div>
      </div>
    </header>

    <main>
      <section class="panel" id="history-panel">
        <section class="panel summary" id="summary-panel">
          <div class="filter-group" id="severity-filters"></div>
          <div class="summary-grid">
            <div class="card">
              <p class="muted">Всего находок</p>
              <p class="metric" id="total-findings">—</p>
            </div>
            <div class="card">
              <p class="muted">Файлов</p>
              <p class="metric" id="total-files">—</p>
            </div>
            <div class="card">
              <p class="muted">Правил</p>
              <p class="metric" id="total-rules">—</p>
            </div>
            <div class="card">
              <p class="muted">Отчетов</p>
              <p class="metric" id="report-type">—</p>
            </div>
          </div>
          <div class="severity-bar" id="severity-bar"></div>
          <div class="search-row">
            <div class="date-filter-group">
              <label class="date-filter">
                <span class="muted">Период</span>
                <input type="date" id="date-from" />
              </label>
              <span class="muted">-</span>
              <label class="date-filter">
                <input type="date" id="date-to" />
              </label>
            </div>
            <label class="search">
              <span class="muted">Поиск</span>
              <input
                type="search"
                id="search"
                placeholder="Путь, правило, сообщение..."
                autocomplete="off"
              />
            </label>
          </div>
        </section>
        <div class="history-actions">
          <button class="button ghost" id="upload-btn" title="Загрузка">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M8 14V6M8 6L5 9M8 6L11 9M3 6V3C3 2.44772 3.44772 2 4 2H12C12.5523 2 13 2.44772 13 3V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="button ghost" id="refresh-history" title="Обновить список">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8C13 5.23858 10.7614 3 8 3M8 3V6M8 3L5 6M13 8C13 5.23858 10.7614 3 8 3M8 13V10M8 13L11 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <div id="history-list" class="history-list"></div>
      </section>

      <section class="panel tab-content" id="report-view" data-tab="report" style="display: none;">
        <div class="report-view-header">
          <button class="button ghost" id="back-btn" title="Назад к списку">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <h2 id="report-view-title">Отчёт</h2>
          <button class="button ghost" id="report-download-btn" title="Скачать в PDF">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M8 2V10M8 10L5 7M8 10L11 7M3 10V13C3 13.5523 3.44772 14 4 14H12C12.5523 14 13 13.5523 13 13V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Скачать в PDF</span>
          </button>
        </div>
        <div id="report-view-content">
          <section class="panel" id="issues-panel">
            <div id="issues"></div>
          </section>
        </div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
