# Semgrep / SARIF Report Reader

Простой сервис для чтения и визуализации отчётов Semgrep (JSON) и любых файлов SARIF. По умолчанию работает офлайн в браузере, но может быть развернут как сервис для совместного просмотра отчётов.

## Возможности
- Загрузка файлов перетаскиванием или выбором из проводника
- Поддержка Semgrep JSON и SARIF 2.1.0
- Карточки с общей статистикой: количество находок, файлов, уникальных правил
- Цветовое распределение по уровням серьёзности и интерактивные фильтры
- Поиск по пути, правилу и тексту сообщения
- Детальная карточка каждой находки с фрагментом кода, тегами и ссылками на правило
- Встроенные демо-отчёты (Semgrep JSON и SARIF) для быстрого просмотра интерфейса
- Возможность загрузить отчёт на сервер и получить ссылку (`?report=<url>`) для передачи разработчикам

## Развёртывание как сервиса

### Docker Compose (рекомендуется)
1. Соберите и запустите сервис:
   ```bash
   docker-compose up --build -d
   ```
2. Откройте `http://localhost:8080` и загрузите отчёт.
3. Нажмите «Сохранить отчёт на сервере» и отправьте ссылку вида
   `http://localhost:8080/?report=http://localhost:8080/uploads/<файл>`
   разработчикам.

В docker-compose хранилище отчётов вынесено в volume `uploads`, чтобы файлы сохранялись между перезапусками.

### Запуск локально без контейнера
1. Клонируйте репозиторий и перейдите в директорию проекта.
2. Запустите встроенный сервер загрузки (сохраняет отчёты в `./uploads`):
   ```bash
   python server.py
   ```
3. Откройте в браузере `http://localhost:8000` и загрузите свой `.json` или `.sarif` файл.
   После загрузки нажмите «Сохранить отчёт на сервере», чтобы получить ссылку.

> **Примечание:** если нужен только локальный офлайн-просмотр без ссылок, можно запустить любой статический сервер:
> ```bash
> python -m http.server 8000
> ```

## Структура
- `index.html` — разметка и точки подключения стилей/скриптов
- `styles.css` — оформление интерфейса
- `app.js` — логика парсинга отчётов и визуализации
- `samples/` — демонстрационные отчёты Semgrep JSON и SARIF

## Получение отчётов Semgrep
- JSON: `semgrep --json > report.json`
- SARIF: `semgrep --sarif > report.sarif`

## Линтинг/тестирование
Отдельных зависимостей не требуется. Для быстрой проверки валидности примеров можно выполнить:
```bash
python -m json.tool samples/semgrep-sample.json
python -m json.tool samples/semgrep-sample.sarif
```
